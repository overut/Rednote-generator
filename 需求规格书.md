# 小红书笔记生成Agent需求规格书

## 1. 项目概述

### 1.1 项目背景
小红书作为中国领先的生活方式分享平台，内容创作需求量大。本项目旨在开发一个智能Agent，帮助用户自动生成小红书笔记的选题、文案标题、正文内容以及配图，并支持将生成的内容自动发布到小红书平台，提高内容创作和发布效率。

### 1.2 项目目标
- 实现一键生成完整小红书笔记的功能
- 提供灵活的配置选项，满足不同用户需求
- 支持多种AI模型，确保生成内容的质量和多样性
- 简化用户操作流程，提供友好的用户界面
- 实现小红书笔记的自动发布功能，支持单篇和批量发布

## 2. 功能需求

### 2.1 选题模块

#### 2.1.1 功能描述
根据用户设定的提示词，通过Deepseek API获取适合小红书平台的笔记选题。

#### 2.1.2 输入
- 用户自定义的选题提示词（通过配置文件设置）
- 可选的领域/类别限制（深度学习、计算机视觉、自然语言处理、大模型、AI等技术相关领域）

#### 2.1.3 处理流程
1. 读取配置文件中的选题提示词
2. 调用Deepseek API
3. 接收并解析API返回的选题列表
4. 格式化选题数据，供后续模块使用

#### 2.1.4 输出
- 3-5个适合小红书平台的选题建议
- 每个选题包含标题和简短描述

### 2.2 文案生成模块

#### 2.2.1 功能描述
根据选题模块提供的选题，通过Deepseek或豆包API生成小红书笔记的标题和正文内容。

#### 2.2.2 输入
- 选题模块输出的选题
- 用户选择的AI模型（Deepseek或豆包）
- 文案生成提示词（通过配置文件设置）

#### 2.2.3 处理流程
1. 接收选题模块输出的选题
2. 根据用户配置选择AI模型
3. 构建包含选题和提示词的请求
4. 调用相应API生成文案
5. 解析并格式化返回的文案内容

#### 2.2.4 输出
- 吸引人的小红书笔记标题（3-5个选项）
- 符合小红书风格的正文内容
- 相关的标签建议

### 2.3 图片生成模块

#### 2.3.1 功能描述
根据生成的文案内容，通过即梦API或通义万象API生成符合小红书风格的配图。

#### 2.3.1 输入
- 文案生成模块输出的标题和内容
- 用户选择的AI模型（即梦或通义万象）
- 图片生成提示词（通过配置文件设置）

#### 2.3.2 处理流程
1. 接收文案生成模块的输出
2. 根据用户配置选择图片生成模型
3. 提取文案关键信息，结合提示词构建图片描述
4. 调用相应API生成图片
5. 处理并保存生成的图片

#### 2.3.3 输出
- 1-3张符合小红书风格的配图
- 图片文件保存到指定目录

### 2.4 配置管理模块

#### 2.4.1 功能描述
提供系统配置管理功能，允许用户自定义各种提示词和API设置。

#### 2.4.2 配置项
- API密钥配置（Deepseek、豆包、即梦、通义万象）
- 各模块提示词配置
- 模型选择配置
- 输出路径配置
- 其他系统参数配置

#### 2.4.3 配置文件格式
采用JSON或YAML格式的配置文件，便于用户编辑和系统解析。

### 2.5 用户界面模块

#### 2.5.1 功能描述
提供用户友好的界面，支持一键生成小红书笔记和自动发布功能。

#### 2.5.2 界面形式（二选一）
1. **Web界面**
   - 简洁的表单界面
   - 实时显示生成进度
   - 预览和下载功能
   - 发布状态显示和管理

2. **命令行界面**
   - 简单的脚本执行
   - 参数配置选项
   - 结果输出到指定目录
   - 发布命令和状态查询

#### 2.5.3 基本操作流程
1. 用户配置系统参数（首次使用）
2. 用户启动生成流程
3. 系统依次执行选题、文案生成、图片生成
4. 展示生成结果
5. 用户保存或导出结果
6. 用户选择发布笔记到小红书平台（可选）

## 3. 非功能需求

### 3.1 性能需求
- 单次完整生成流程应在3分钟内完成
- 支持并发处理多个生成任务（可选）

### 3.2 可用性需求
- 界面简洁直观，易于操作
- 提供必要的错误提示和帮助信息
- 支持配置参数验证

### 3.3 可靠性需求
- API调用失败时提供重试机制
- 生成内容保存前进行验证
- 提供日志记录功能

### 3.4 安全性需求
- API密钥安全存储
- 不保存用户敏感数据
- 支持本地部署，保护数据隐私

### 3.5 可扩展性需求
- 模块化设计，便于添加新的AI模型
- 配置文件结构灵活，支持新增配置项
- 预留接口，便于后续功能扩展

## 4. 技术选型建议

### 4.1 开发语言
- Python：丰富的API调用库和AI模型支持

### 4.2 主要依赖
- requests：API调用
- Pillow：图片处理
- tkinter/PyQt：桌面GUI（可选）
- Flask/FastAPI：Web服务（可选）
- PyYAML：配置文件解析
- Streamlit：前端界面实现

### 4.3 部署方式
- 本地应用程序
- 容器化部署（可选）

## 5. 项目里程碑

### 阶段一：核心功能实现
- 选题模块开发
- 文案生成模块开发
- 图片生成模块开发
- 基础配置管理

### 阶段二：用户界面开发
- 命令行界面实现
- 或Web界面实现

### 阶段三：测试与优化
- 功能测试
- 性能优化
- 错误处理完善

### 2.6 小红书发布模块

#### 2.6.1 功能描述
实现小红书笔记的自动发布功能，支持将生成的笔记内容（标题、正文、图片、标签）自动上传并发布到小红书平台。

#### 2.6.2 输入
- 生成的笔记内容（标题、正文、图片、标签）
- 小红书账号配置（Cookie或登录凭证）
- 发布参数（是否允许评论、是否同步到其他平台等）

#### 2.6.3 处理流程
1. 读取用户配置的小红书账号信息
2. 初始化浏览器环境（使用Playwright）
3. 导航到小红书创作者平台发布页面
4. 自动填充标题和正文内容
5. 上传生成的图片
6. 添加相关标签
7. 设置发布参数
8. 执行发布操作
9. 监控发布状态并返回结果

#### 2.6.4 输出
- 发布状态（成功/失败）
- 发布结果信息（发布链接、错误信息等）
- 发布日志记录

## 3. 非功能需求

### 3.1 性能需求
- 单次完整生成流程应在3分钟内完成
- 支持并发处理多个生成任务（可选）
- 单次发布操作应在1分钟内完成（网络条件正常情况下）

### 3.2 可用性需求
- 界面简洁直观，易于操作
- 提供必要的错误提示和帮助信息
- 支持配置参数验证
- 发布过程可视化，提供进度反馈

### 3.3 可靠性需求
- API调用失败时提供重试机制
- 生成内容保存前进行验证
- 提供日志记录功能
- 发布失败时提供详细错误信息和重试选项

### 3.4 安全性需求
- API密钥安全存储
- 不保存用户敏感数据
- 支持本地部署，保护数据隐私
- 小红书账号凭证加密存储

### 3.5 可扩展性需求
- 模块化设计，便于添加新的AI模型
- 配置文件结构灵活，支持新增配置项
- 预留接口，便于后续功能扩展
- 支持未来扩展其他平台的发布功能

## 4. 技术选型建议

### 4.1 开发语言
- Python：丰富的API调用库和AI模型支持

### 4.2 主要依赖
- requests：API调用
- Pillow：图片处理
- tkinter/PyQt：桌面GUI（可选）
- Flask/FastAPI：Web服务（可选）
- PyYAML：配置文件解析
- Streamlit：前端界面实现
- Playwright：浏览器自动化，用于小红书发布

### 4.3 部署方式
- 本地应用程序
- 容器化部署（可选）

## 5. 项目里程碑

### 阶段一：核心功能实现
- 选题模块开发
- 文案生成模块开发
- 图片生成模块开发
- 基础配置管理

### 阶段二：用户界面开发
- 命令行界面实现
- 或Web界面实现

### 阶段三：测试与优化
- 功能测试
- 性能优化
- 错误处理完善

### 阶段四：发布功能开发
- 浏览器自动化环境搭建
- 小红书发布流程实现
- 账号管理功能
- 发布状态监控与反馈

## 6. 风险与限制

### 6.1 API依赖风险
- 第三方API可能存在稳定性问题
- API调用可能产生费用
- API调用频率限制

### 6.2 内容质量风险
- 生成内容可能不符合小红书平台规范
- 图片版权问题
- 内容重复度问题

### 6.3 技术限制
- 依赖第三方API的功能和性能
- 本地硬件资源限制（特别是图片生成）

### 6.4 发布相关风险
- 小红书平台可能更新发布页面结构，导致自动化失效
- 频繁自动化操作可能触发平台风控机制
- 账号安全风险（凭证泄露）
- 网络环境限制可能影响发布成功率

## 7. 验收标准

- [ ] 能够通过配置文件自定义提示词
- [ ] 能够成功调用Deepseek API生成选题
- [ ] 能够成功调用Deepseek或豆包API生成文案
- [ ] 能够成功调用即梦或通义万象API生成图片
- [ ] 提供友好的用户界面（命令行或Web）
- [ ] 一键生成完整的小红书笔记（选题+文案+图片）
- [ ] 生成的结果符合小红书平台风格
- [ ] 系统运行稳定，错误处理完善
- [ ] 能够成功配置小红书账号信息
- [ ] 能够自动填充笔记内容和上传图片
- [ ] 能够成功发布笔记到小红书平台
- [ ] 提供发布状态反馈和错误处理
- [ ] 支持批量发布功能（可选）